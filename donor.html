<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Donor Form</title>
    <link rel="stylesheet" href="donor.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lilita+One&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link href="style.css" rel="stylesheet">
</head>
<body>
  <header class="d-flex flex-wrap justify-content-center py-3 mb-4 border-bottom">
    <a href="/" class="d-flex align-items-center mb-3 mb-md-0 me-md-auto link-body-emphasis text-decoration-none">
      <img src="OIP (1).jpg" class="bi me-2" width="240px" height="100px">
      <span class="fs-4" id="helping-bridge">Food Donate</span>
    </a>

    <ul class="nav nav-pills">
      <li class="nav-item"><a href="index.html" class="nav-link" aria-current="page">Home</a></li>
      <li class="nav-item"><a href="about.html" class="nav-link">About</a></li>
      <li class="nav-item"><a href="login.html" class="nav-link">Login</a></li>
      <li class="nav-item"><a href="signup.html" class="nav-link">Signup</a></li>
      <li class="nav-item"><a href="receiver.html" class="nav-link">Orphanage Form</a></li>
      <li class="nav-item"><a href="donor.html" class="nav-link">Donor Form</a></li>
      <li class="nav-item"><a href="notifications.html" class="nav-link">ðŸ””</a></li>
      <li class="nav-item"><a href="feedback.html" class="nav-link">Feedback</a></li>
    </ul>
  </header>

  <h1>Donor Form</h1>

  <form id="donorForm">
    <button type="submit">Find Nearby Orphanages</button>
  </form>

  <div id="orphanagesList" style="display:none;">
    <h2>Nearby Orphanages</h2>
    <ul id="orphanageDetails">
      <!-- Orphanages will be listed here -->
    </ul>
  </div>

  <script>
    const donorForm = document.getElementById('donorForm');
    const orphanagesList = document.getElementById('orphanagesList');
    const orphanageDetails = document.getElementById('orphanageDetails');

    // List of orphanages with their coordinates (latitude, longitude)
    const orphanages = [
      { name: 'Alipiri Orphanage', location: 'Alipiri', lat: 13.6500, lon: 79.4178 },
      { name: 'Kapila Theertham Orphanage', location: 'Kapila Theertham', lat: 13.6240, lon: 79.4189 },
      { name: 'Govindaraja Swamy Orphanage', location: 'Govindaraja Swamy Temple', lat: 13.6287, lon: 79.4175 },
      { name: 'Sri Venkateswara Zoo Orphanage', location: 'Sri Venkateswara Zoo', lat: 13.6028, lon: 79.4001 },
      { name: 'Chandragiri Fort Orphanage', location: 'Chandragiri Fort', lat: 13.5358, lon: 79.3033 },
      { name: 'Tirumala Orphanage', location: 'Tirumala', lat: 13.6868, lon: 79.3550 }
    ];

    // Function to calculate distance between two lat-lon points in kilometers using Haversine formula
    function calculateDistance(lat1, lon1, lat2, lon2) {
      const R = 6371; // Radius of Earth in km
      const dLat = (lat2 - lat1) * (Math.PI / 180);
      const dLon = (lon2 - lon1) * (Math.PI / 180);
      const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +
                Math.cos(lat1 * (Math.PI / 180)) * Math.cos(lat2 * (Math.PI / 180)) *
                Math.sin(dLon / 2) * Math.sin(dLon / 2);
      const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
      const distance = R * c; // Distance in km
      return distance;
    }

    donorForm.addEventListener('submit', function(event) {
      event.preventDefault(); // Prevent page reload

      // Get the donor's current location using geolocation
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(function(position) {
          const donorLat = position.coords.latitude;
          const donorLon = position.coords.longitude;

          // Filter orphanages based on distance from donor (e.g., within 20 km)
          const nearbyOrphanages = orphanages.filter(orphanage => {
            const distance = calculateDistance(donorLat, donorLon, orphanage.lat, orphanage.lon);
            return distance <= 20; // Only show orphanages within 20 km
          });

          // Display orphanage details
          if (nearbyOrphanages.length > 0) {
            orphanageDetails.innerHTML = ''; // Clear previous results
            nearbyOrphanages.forEach(orphanage => {
              const orphanageItem = document.createElement('li');
              orphanageItem.innerHTML = `
                <strong>${orphanage.name}</strong><br>
                Location: ${orphanage.location}<br>
                Distance: ${calculateDistance(donorLat, donorLon, orphanage.lat, orphanage.lon).toFixed(2)} km<br>
                <hr>
              `;
              orphanageDetails.appendChild(orphanageItem);
            });
            orphanagesList.style.display = 'block'; // Show orphanages list
          } else {
            orphanageDetails.innerHTML = '<p>No nearby orphanages found within 20 km.</p>';
            orphanagesList.style.display = 'block'; // Show message if no orphanages found
          }
        }, function(error) {
          alert('Error getting location. Please enable location services.');
        });
      } else {
        alert('Geolocation is not supported by this browser.');
      }
    });
  </script>

  <!-- Footer Section -->
  <footer style="background-color: #000000; color: #fff; padding: 20px 0; width:100%">
    <div style="max-width: 100%; margin: auto; display: flex; flex-wrap: wrap; justify-content: space-between;">
      <!-- About Us -->
      <div style="flex: 1 1 250px; margin: 10px;">
        <h3>About Us</h3>
        <p>
          We are dedicated to delivering top-notch services and creating value for our customers. 
          Learn more about our mission and values.
        </p>
      </div>
      <!-- Contact Information -->
      <div style="flex: 1 1 250px; margin: 10px;">
        <h3>Contact Us</h3>
        <p>SPMVV, Tirupati</p>
        <p>Email: kapulurubhuvaneeswarivspdbct@gmail.com</p>
        <p>Email: sravani30j@gmail.com</p>
      </div>
      <div style="flex: 1 1 250px; margin:10px;">
        <h3>Follow Us on Linkedin</h3>
        <p><a href="https://www.linkedin.com/in/akhila-kurimella-652470311?utm_source=share&utm_campaign=share_via&utm_content=profile&utm_medium=android_app">Akhila</a></p>
        <p><a href="https://www.linkedin.com/in/hemalatha-malapati-b0591030a?utm_source=share&utm_campaign=share_via&utm_content=profile&utm_medium=android_app">Hemalatha</a></p>
      </div>
    </div>

    <!-- Footer Bottom -->
    <div style="text-align: center; font-size: 14px; color: #ccc;">
      &copy; 2024 Food Donate. All rights reserved.
    </div>
  </footer>

</body>
</html>

